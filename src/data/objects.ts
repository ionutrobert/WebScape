import { ObjectDefinition, WorldObjectState } from "@/shared/types";

/**
 * OSRS Mining Rocks
 * - levelReq: Mining level required to mine
 * - xpGranted: XP earned per ore
 * - depletionTicks: How many ticks before rock depletes (success chance rolls)
 * - respawnTicks: How many ticks for rock to respawn
 * - miningTicks: Base ticks between mining attempts (lower = faster with better pickaxe)
 */
export const OBJECTS: Record<string, ObjectDefinition> = {
  // ============ MINING ROCKS ============
  copper_rock: {
    id: "copper_rock",
    name: "Copper Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 1,
    xpGranted: 17.5,
    toolRequired: "pickaxe",
    resourceGiven: "copper_ore",
    resourceQty: 1,
    depletionTicks: 4,
    respawnTicks: 8,
    miningTicks: 8,
    activeModel: "rock_copper",
    depletedModel: "rock_depleted",
  },
  tin_rock: {
    id: "tin_rock",
    name: "Tin Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 1,
    xpGranted: 17.5,
    toolRequired: "pickaxe",
    resourceGiven: "tin_ore",
    resourceQty: 1,
    depletionTicks: 4,
    respawnTicks: 8,
    miningTicks: 8,
    activeModel: "rock_tin",
    depletedModel: "rock_depleted",
  },
  iron_rock: {
    id: "iron_rock",
    name: "Iron Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 15,
    xpGranted: 35,
    toolRequired: "pickaxe",
    resourceGiven: "iron_ore",
    resourceQty: 1,
    depletionTicks: 5,
    respawnTicks: 12,
    miningTicks: 7,
    activeModel: "rock_iron",
    depletedModel: "rock_depleted",
  },
  silver_rock: {
    id: "silver_rock",
    name: "Silver Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 20,
    xpGranted: 40,
    toolRequired: "pickaxe",
    resourceGiven: "silver_ore",
    resourceQty: 1,
    depletionTicks: 5,
    respawnTicks: 15,
    miningTicks: 6,
    activeModel: "rock_silver",
    depletedModel: "rock_depleted",
  },
  coal_rock: {
    id: "coal_rock",
    name: "Coal Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 30,
    xpGranted: 50,
    toolRequired: "pickaxe",
    resourceGiven: "coal",
    resourceQty: 1,
    depletionTicks: 6,
    respawnTicks: 18,
    miningTicks: 5,
    activeModel: "rock_coal",
    depletedModel: "rock_depleted",
  },
  gold_rock: {
    id: "gold_rock",
    name: "Gold Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 40,
    xpGranted: 65,
    toolRequired: "pickaxe",
    resourceGiven: "gold_ore",
    resourceQty: 1,
    depletionTicks: 7,
    respawnTicks: 22,
    miningTicks: 5,
    activeModel: "rock_gold",
    depletedModel: "rock_depleted",
  },
  mithril_rock: {
    id: "mithril_rock",
    name: "Mithril Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 55,
    xpGranted: 80,
    toolRequired: "pickaxe",
    resourceGiven: "mithril_ore",
    resourceQty: 1,
    depletionTicks: 8,
    respawnTicks: 25,
    miningTicks: 4,
    activeModel: "rock_mithril",
    depletedModel: "rock_depleted",
  },
  adamant_rock: {
    id: "adamant_rock",
    name: "Adamantite Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 70,
    xpGranted: 95,
    toolRequired: "pickaxe",
    resourceGiven: "adamant_ore",
    resourceQty: 1,
    depletionTicks: 10,
    respawnTicks: 30,
    miningTicks: 3,
    activeModel: "rock_adamant",
    depletedModel: "rock_depleted",
  },
  rune_rock: {
    id: "rune_rock",
    name: "Runite Rock",
    type: "resource",
    skillType: "mining",
    interactionDistance: 1,
    levelReq: 85,
    xpGranted: 125,
    toolRequired: "pickaxe",
    resourceGiven: "rune_ore",
    resourceQty: 1,
    depletionTicks: 12,
    respawnTicks: 40,
    miningTicks: 3,
    activeModel: "rock_rune",
    depletedModel: "rock_depleted",
  },

  // ============ TREES ============
  // OSRS Trees
  // - levelReq: Woodcutting level required
  // - xpGranted: XP earned per log
  // - depletionTicks: How many successful chops before tree depletes
  // - respawnTicks: How many ticks for tree to respawn
  tree: {
    id: "tree",
    name: "Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 1,
    xpGranted: 25,
    toolRequired: "axe",
    resourceGiven: "logs",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 6,
    choppingTicks: 4,
    activeModel: "tree_regular",
    depletedModel: "tree_stump",
  },
  oak_tree: {
    id: "oak_tree",
    name: "Oak Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 15,
    xpGranted: 37.5,
    toolRequired: "axe",
    resourceGiven: "oak_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 10,
    choppingTicks: 4,
    activeModel: "tree_oak",
    depletedModel: "tree_stump",
  },
  willow_tree: {
    id: "willow_tree",
    name: "Willow Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 30,
    xpGranted: 67.5,
    toolRequired: "axe",
    resourceGiven: "willow_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 14,
    choppingTicks: 4,
    activeModel: "tree_willow",
    depletedModel: "tree_stump",
  },
  maple_tree: {
    id: "maple_tree",
    name: "Maple Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 45,
    xpGranted: 100,
    toolRequired: "axe",
    resourceGiven: "maple_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 18,
    choppingTicks: 4,
    activeModel: "tree_maple",
    depletedModel: "tree_stump",
  },
  yew_tree: {
    id: "yew_tree",
    name: "Yew Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 60,
    xpGranted: 175,
    toolRequired: "axe",
    resourceGiven: "yew_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 22,
    choppingTicks: 5,
    activeModel: "tree_yew",
    depletedModel: "tree_stump",
  },
  magic_tree: {
    id: "magic_tree",
    name: "Magic Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 75,
    xpGranted: 250,
    toolRequired: "axe",
    resourceGiven: "magic_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 28,
    choppingTicks: 5,
    activeModel: "tree_magic",
    depletedModel: "tree_stump",
  },
  redwood_tree: {
    id: "redwood_tree",
    name: "Redwood Tree",
    type: "resource",
    skillType: "woodcutting",
    interactionDistance: 1,
    levelReq: 90,
    xpGranted: 380,
    toolRequired: "axe",
    resourceGiven: "redwood_log",
    resourceQty: 1,
    depletionTicks: 1,
    respawnTicks: 35,
    choppingTicks: 6,
    activeModel: "tree_redwood",
    depletedModel: "tree_stump",
  },

  // ============ FISHING SPOTS ============
  fishing_spot_small_net: {
    id: "fishing_spot_small_net",
    name: "Fishing Spot (Net)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 1,
    xpGranted: 10,
    toolRequired: "net",
    resourceGiven: "raw_shrimp",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 5,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_rod: {
    id: "fishing_spot_rod",
    name: "Fishing Spot (Rod)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 15,
    xpGranted: 20,
    toolRequired: "rod",
    resourceGiven: "raw_anchovy",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 5,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_fly_rod: {
    id: "fishing_spot_fly_rod",
    name: "Fishing Spot (Fly)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 20,
    xpGranted: 30,
    toolRequired: "rod",
    resourceGiven: "raw_trout",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 6,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_salmon: {
    id: "fishing_spot_salmon",
    name: "Fishing Spot (Salmon)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 30,
    xpGranted: 40,
    toolRequired: "rod",
    resourceGiven: "raw_salmon",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 6,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_harpoon: {
    id: "fishing_spot_harpoon",
    name: "Fishing Spot (Harpoon)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 35,
    xpGranted: 50,
    toolRequired: "harpoon",
    resourceGiven: "raw_tuna",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 8,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_big_net: {
    id: "fishing_spot_big_net",
    name: "Fishing Spot (Big Net)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 40,
    xpGranted: 55,
    toolRequired: "net",
    resourceGiven: "raw_lobster",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 8,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_swordfish: {
    id: "fishing_spot_swordfish",
    name: "Fishing Spot (Swordfish)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 50,
    xpGranted: 70,
    toolRequired: "harpoon",
    resourceGiven: "raw_swordfish",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 10,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },
  fishing_spot_shark: {
    id: "fishing_spot_shark",
    name: "Fishing Spot (Shark)",
    type: "resource",
    skillType: "fishing",
    interactionDistance: 1,
    levelReq: 76,
    xpGranted: 100,
    toolRequired: "harpoon",
    resourceGiven: "raw_shark",
    resourceQty: 1,
    depletionTicks: 3,
    respawnTicks: 12,
    fishingTicks: 4,
    activeModel: "fishing_spot",
    depletedModel: "fishing_spot_depleted",
  },

  // ============ DECORATIONS ============
  rock_small: {
    id: "rock_small",
    name: "Small Rock",
    type: "decoration",
    activeModel: "rock_small",
  },
  rock_medium: {
    id: "rock_medium",
    name: "Medium Rock",
    type: "decoration",
    activeModel: "rock_medium",
  },
  rock_large: {
    id: "rock_large",
    name: "Large Rock",
    type: "decoration",
    activeModel: "rock_large",
  },
  decorative_tree: {
    id: "decorative_tree",
    name: "Decorative Tree",
    type: "decoration",
    activeModel: "tree_decorative",
  },
  pine_tree: {
    id: "pine_tree",
    name: "Pine Tree",
    type: "decoration",
    activeModel: "tree_pine",
  },
  bush: {
    id: "bush",
    name: "Bush",
    type: "decoration",
    activeModel: "plant_bush",
  },
  flower_red: {
    id: "flower_red",
    name: "Red Flower",
    type: "decoration",
    activeModel: "plant_flower_red",
  },
  flower_blue: {
    id: "flower_blue",
    name: "Blue Flower",
    type: "decoration",
    activeModel: "plant_flower_blue",
  },
  grass_tuft: {
    id: "grass_tuft",
    name: "Grass Tuft",
    type: "decoration",
    activeModel: "plant_grass",
  },
  fence_post: {
    id: "fence_post",
    name: "Fence Post",
    type: "decoration",
    activeModel: "structure_fence",
  },
  lamp_post: {
    id: "lamp_post",
    name: "Lamp Post",
    type: "decoration",
    activeModel: "structure_lamp",
  },
  signpost: {
    id: "signpost",
    name: "Signpost",
    type: "decoration",
    activeModel: "structure_sign",
  },
  crate: {
    id: "crate",
    name: "Crate",
    type: "decoration",
    activeModel: "prop_crate",
  },
  barrel: {
    id: "barrel",
    name: "Barrel",
    type: "decoration",
    activeModel: "prop_barrel",
  },
  water_lilypad: {
    id: "water_lilypad",
    name: "Lilypad",
    type: "decoration",
    activeModel: "water_lilypad",
  },
  dock_wooden: {
    id: "dock_wooden",
    name: "Wooden Dock",
    type: "decoration",
    activeModel: "structure_dock",
  },

  // ============ COOKING OBJECTS ============
  fire: {
    id: "fire",
    name: "Fire",
    type: "static",
    interactionDistance: 1,
    activeModel: "fire",
  },
  cooking_range: {
    id: "cooking_range",
    name: "Cooking Range",
    type: "static",
    interactionDistance: 1,
    activeModel: "cooking_range",
  },
};

export function getObject(id: string): ObjectDefinition | undefined {
  return OBJECTS[id];
}

export function createWorldObject(
  definitionId: string,
  x: number,
  y: number,
): WorldObjectState {
  return {
    position: { x, y },
    definitionId,
    status: "active",
    ticksUntilRespawn: 0,
    harvestProgress: 0,
  };
}

export const INITIAL_WORLD_OBJECTS: WorldObjectState[] = [
  createWorldObject("copper_rock", 5, 5),
  createWorldObject("tin_rock", 6, 5),
  createWorldObject("iron_rock", 7, 8),
  createWorldObject("coal_rock", 8, 8),
  createWorldObject("gold_rock", 12, 3),
  createWorldObject("tree", 3, 12),
  createWorldObject("tree", 4, 12),
  createWorldObject("oak_tree", 3, 5),
  createWorldObject("willow_tree", 16, 15),
  // Fishing spots
  createWorldObject("fishing_spot_small_net", 10, 20),
  createWorldObject("fishing_spot_rod", 11, 20),
  createWorldObject("fishing_spot_fly_rod", 12, 20),
  createWorldObject("fishing_spot_harpoon", 13, 20),
  // Cooking spots
  createWorldObject("fire", 8, 10),
  createWorldObject("cooking_range", 9, 10),
];
